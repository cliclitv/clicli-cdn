<html>

<head>
    <script src="/static/js/jquery-3.2.1.min.js"></script>
</head>

<body style="width:100%;height:100%;text-align:center;">
    <div style="width:100%;height:100%;margin:0 0 10px 0;text-align: center;">
        <div style="font-size:20px;font-weight:bold;color:#ddd; 
      margin:0;padding-top:3px;background:#383e4b;height:40px;">
            文件上传
        </div>
        <div style="width:60%;height:30%;text-align:center;margin: 50px auto;">
            <form id="upForm" action="#" method="post" enctype="multipart/form-data">
                <input id="file" type="file" name="file" />
                <button id="上传" type="button" onclick="onUpload();">upload</button>
            </form>
        </div>
    </div>
</body>

<script lang="javascript">


    function onUpload() {
        var upUrl = "/file/upload?" + queryParams();
        var upEntry = localStorage.getItem("uploadEntry");
        if (upEntry != "") {
            if (upEntry.indexOf("http:") >= 0) {
                upUrl = upEntry + "/file/upload?" + queryParams();
            } else {
                upUrl = "http://" + upEntry + "/file/upload?" + queryParams();
            }
        }
        $.ajax({
            url: upUrl,
            type: 'POST',
            cache: false,
            data: new FormData($('#upForm')[0]),
            processData: false,
            contentType: false,
            error: function (err) {
                alert('请求报错信息: ' + JSON.stringify(err));
            },
            success: function (res) {
                alert('请求返回结果: ' + JSON.stringify(res));
            }
        });
    }
</script>

</html>